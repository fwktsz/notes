## IO 基本概念与术语

1. kernel 内核
1. FD 文件描述符
1. VFS 文件系统，是一颗树
1. inode id 
1. pagecache 4K
1. ditry 脏
1. flush 刷新

## 冯诺依曼 计算机系统 ：
计算器，控制器，主存储器， IO设备

-> Linux 对io 的抽象

## pagecache 
默认4K ，一个程序加载到内存中，是按需加载的。是按照 4k，4K 按需申请。
    当申请完了 还不够时，会产生缺页异常，这时会通过中断(0x80中断，system_call) 通知 kernel。

    
## mmap映射

mmap是一种内存映射文件的方法，即将一个文件或者其它对象映射到进程的地址空间，

实现文件磁盘地址和进程虚拟地址空间中一段虚拟地址的一一对映关系。

实现这样的映射关系后，进程就可以采用指针的方式读写操作这一段内存，而系统会自动回写页面到对应的文件磁盘上，即完成了对文件的操作而不必再调用read,write等系统调用函数。

相反，内核空间对这段区域的修改也直接反映用户空间，从而可以实现不同进程间的文件共享。

**总而言之，常规文件操作需要从磁盘到页缓存再到用户主存的两次数据拷贝。而mmap操控文件，只需要从磁盘到用户主存的一次数据拷贝过程。实现了用户空间和内核空间的数据直接交互而省去了空间不同数据不通的繁琐过程。因此mmap效率更高。**

 ![如下图](./img/mmap.png)

## 阻塞/非阻塞 同步/异步

1. 同步阻塞
    
    BIO 

1. 同步非阻塞
    
    NIO

    多路复用器：
        select  1024
        poll    无限

     epoll   



1. 异步阻塞没意义

1. 异步非阻塞

    AIO 暂时没有实现。不是技术原因，而是人为原因。


 